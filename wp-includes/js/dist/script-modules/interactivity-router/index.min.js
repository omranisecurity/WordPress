import*as e from"@wordpress/interactivity";var t={317:e=>{e.exports=import("@wordpress/a11y")}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};n.d(i,{o:()=>M,w:()=>$});const a=(e=>{var t={};return n.d(t,e),t})({getConfig:()=>e.getConfig,privateApis:()=>e.privateApis,store:()=>e.store}),r=/url\(\s*(?:(["'])((?:\\.|[^\n\\"'])+)\1|((?:\\.|[^\s,"'()\\])+))\s*\)/g,s=(e,t)=>{try{return new URL(e,t).toString()}catch(t){return e}},l=(e,t)=>e.replace(r,((e,o="",n,i)=>`url(${o}${s(n||i,t)}${o})`)),c=new Map,d=async(e,t)=>(c.has(e)||c.set(e,t()),c.get(e)),g=(e,t=(e.location||window.location).href)=>[...e.querySelectorAll("style,link[rel=stylesheet]")].map((e=>"LINK"===e.nodeName?(async({id:e,href:t,sheet:o},n)=>{const i=e||t,a=s(t,n);return d(i,o?()=>{const e=new CSSStyleSheet;for(const{cssText:t}of o.cssRules)e.insertRule(l(t,a));return Promise.resolve(e)}:async()=>{const e=await fetch(t),o=await e.text(),n=new CSSStyleSheet;return await n.replace(l(o,a)),n})})(e,t):(async({textContent:e})=>d(e,(async()=>{const t=new CSSStyleSheet;return await t.replace(e),t})))(e)));var w;const{directivePrefix:u,getRegionRootFragment:p,initialVdom:h,toVdom:m,render:y,parseServerData:f,populateServerData:v,batch:S}=(0,a.privateApis)("I acknowledge that using private APIs means my theme or plugin will inevitably break in the next version of WordPress."),x=null!==(w=(0,a.getConfig)("core/router").navigationMode)&&void 0!==w?w:"regionBased",b=new Map,P=e=>{const t=new URL(e,window.location.href);return t.pathname+t.search},A=(e,{vdom:t,baseUrl:o}={})=>{const n={body:void 0},i=g(e,o),a=[...e.querySelectorAll("script[type=module][src]")].map((e=>e.src));if("regionBased"===x){const o=`data-${u}-router-region`;e.querySelectorAll(`[${o}]`).forEach((e=>{const i=e.getAttribute(o);n[i]=t?.has(e)?t.get(e):m(e)}))}const r=e.querySelector("title")?.innerText,s=f(e);return{regions:n,styles:i,scriptModules:a,title:r,initialData:s}},C=async e=>{await Promise.all([...e.styles,...e.scriptModules.map((e=>import(e)))]);const t=await Promise.all(e.styles);if(window.document.querySelectorAll("style,link[rel=stylesheet]").forEach((e=>e.remove())),window.document.adoptedStyleSheets=t,"regionBased"===x){const t=`data-${u}-router-region`;S((()=>{v(e.initialData),document.querySelectorAll(`[${t}]`).forEach((o=>{const n=o.getAttribute(t),i=p(o);y(e.regions[n],i)}))}))}e.title&&(document.title=e.title)},L=e=>(window.location.assign(e),new Promise((()=>{})));window.addEventListener("popstate",(async()=>{const e=P(window.location.href),t=b.has(e)&&await b.get(e);t?(await C(t),$.url=window.location.href):window.location.reload()})),b.set(P(window.location.href),Promise.resolve(A(document,{vdom:h,baseUrl:window.location.href})));let D="",R=!1;const q={loading:"Loading page, please wait.",loaded:"Page Loaded."},{state:$,actions:M}=(0,a.store)("core/router",{state:{url:window.location.href,navigation:{isLoading:!1,hasStarted:!1,hasFinished:!1}},actions:{*navigate(e,t={}){const{clientNavigationDisabled:o}=(0,a.getConfig)();o&&(yield L(e));const n=P(e),{navigation:i}=$,{loadingAnimation:r=!0,screenReaderAnnouncement:s=!0,timeout:l=1e4}=t;D=e,M.prefetch(n,t);const c=new Promise((e=>setTimeout(e,l))),d=setTimeout((()=>{D===e&&(i.isLoading=!0,r&&(i.hasStarted=!0,i.hasFinished=!1),s&&N("loading"))}),400),g=yield Promise.race([b.get(n),c]);if(clearTimeout(d),D===e)if(g&&!g.initialData?.config?.["core/router"]?.clientNavigationDisabled){yield C(g),window.history[t.replace?"replaceState":"pushState"]({},"",e),$.url=e,i.isLoading=!1,r&&(i.hasStarted=!1,i.hasFinished=!0),s&&N("loaded");const{hash:o}=new URL(e,window.location.href);o&&document.querySelector(o)?.scrollIntoView()}else yield L(e)},prefetch(e,t={}){const{clientNavigationDisabled:o}=(0,a.getConfig)();if(o)return;const n=P(e);!t.force&&b.has(n)||b.set(n,(async(e,{html:t})=>{try{if(!t){const o=await window.fetch(e);if(200!==o.status)return!1;t=await o.text()}const o=(new window.DOMParser).parseFromString(t,"text/html");return A(o,{baseUrl:e})}catch(e){return!1}})(n,{html:t.html}))}}});function N(e){if(!R){R=!0;const e=document.getElementById("wp-script-module-data-@wordpress/interactivity-router")?.textContent;if(e)try{const t=JSON.parse(e);"string"==typeof t?.i18n?.loading&&(q.loading=t.i18n.loading),"string"==typeof t?.i18n?.loaded&&(q.loaded=t.i18n.loaded)}catch{}else $.navigation.texts?.loading&&(q.loading=$.navigation.texts.loading),$.navigation.texts?.loaded&&(q.loaded=$.navigation.texts.loaded)}const t=q[e];Promise.resolve().then(n.bind(n,317)).then((({speak:e})=>e(t)),(()=>{}))}var U=i.o,k=i.w;export{U as actions,k as state};